!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/builds/",n(n.s=0)}([function(t,e,n){n(2),t.exports=n(1)},function(t,e,n){},function(t,e,n){"use strict";function a(){}n.r(e);function o(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(o)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}new Set;function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function p(){return m(" ")}function h(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return Array.from(t.childNodes)}function g(t,e,n,a){for(let a=0;a<t.length;a+=1){const o=t[a];if(o.nodeName===e){let e=0;for(;e<o.attributes.length;){const t=o.attributes[e];n[t.name]?e++:o.removeAttribute(t.name)}return t.splice(a,1)[0]}}return a?function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}(e):f(e)}function v(t,e){for(let n=0;n<t.length;n+=1){const a=t[n];if(3===a.nodeType)return a.data=""+e,t.splice(n,1)[0]}return m(e)}function y(t){return v(t," ")}function w(t,e,n){t.classList[n?"add":"remove"](e)}let T;function x(t){T=t}const E=[],I=[],_=[],S=[],V=Promise.resolve();let k=!1;function A(){k||(k=!0,V.then(C))}function N(t){_.push(t)}function O(t){S.push(t)}let D=!1;const R=new Set;function C(){if(!D){D=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];x(e),j(e.$$)}for(E.length=0;I.length;)I.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];R.has(e)||(R.add(e),e())}_.length=0}while(E.length);for(;S.length;)S.pop()();k=!1,D=!1,R.clear()}}function j(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const q=new Set;let P;function M(){P={r:0,c:[],p:P}}function U(){P.r||i(P.c),P=P.p}function B(t,e){t&&t.i&&(q.delete(t),t.i(e))}function L(t,e,n,a){if(t&&t.o){if(q.has(t))return;q.add(t),P.c.push(()=>{q.delete(t),a&&(n&&t.d(1),a())}),t.o(e)}}"undefined"!=typeof window?window:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let G;function F(t,e,n){const a=t.$$.props[e];void 0!==a&&(t.$$.bound[a]=n,n(t.$$.ctx[a]))}function H(t){t&&t.c()}function z(t,e){t&&t.l(e)}function W(t,e,n){const{fragment:a,on_mount:r,on_destroy:l,after_update:c}=t.$$;a&&a.m(e,n),N(()=>{const e=r.map(o).filter(s);l?l.push(...e):i(e),t.$$.on_mount=[]}),c.forEach(N)}function J(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function K(t,e,n,o,s,l,c=[-1]){const u=T;x(t);const d=e.props||{},f=t.$$={fragment:null,ctx:null,props:l,update:a,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:c};let m=!1;f.ctx=n?n(t,d,(e,n,...a)=>{const o=a.length?a[0]:n;return f.ctx&&s(f.ctx[e],f.ctx[e]=o)&&(f.bound[e]&&f.bound[e](o),m&&function(t,e){-1===t.$$.dirty[0]&&(E.push(t),A(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n}):[],f.update(),m=!0,i(f.before_update),f.fragment=!!o&&o(f.ctx),e.target&&(e.hydrate?f.fragment&&f.fragment.l(b(e.target)):f.fragment&&f.fragment.c(),e.intro&&B(t.$$.fragment),W(t,e.target,e.anchor),C()),x(u)}"function"==typeof HTMLElement&&(G=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){J(this,1),this.$destroy=a}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});class Q{$destroy(){J(this,1),this.$destroy=a}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function X(t){let e,n,o,r,s,l,w,T,x;return{c(){e=f("div"),n=f("button"),o=m("◀"),r=p(),s=f("input"),l=p(),w=f("button"),T=m("▶"),this.h()},l(t){e=g(t,"DIV",{class:!0});var a=b(e);n=g(a,"BUTTON",{class:!0,disabled:!0});var i=b(n);o=v(i,"◀"),i.forEach(d),r=y(a),s=g(a,"INPUT",{class:!0,value:!0,disabled:!0}),l=y(a),w=g(a,"BUTTON",{class:!0,disabled:!0});var c=b(w);T=v(c,"▶"),c.forEach(d),a.forEach(d),this.h()},h(){$(n,"class","numberfield-button numberfield-button-left"),n.disabled=t[1],$(s,"class","numberfield-display"),s.value=t[0],s.disabled=t[1],$(w,"class","numberfield-button numberfield-button-right"),w.disabled=t[1],$(e,"class","numberfield")},m(a,i){u(a,e,i),c(e,n),c(n,o),c(e,r),c(e,s),c(e,l),c(e,w),c(w,T),x=[h(n,"click",t[2]),h(s,"blur",t[4]),h(w,"click",t[3])]},p(t,[e]){2&e&&(n.disabled=t[1]),1&e&&s.value!==t[0]&&(s.value=t[0]),2&e&&(s.disabled=t[1]),2&e&&(w.disabled=t[1])},i:a,o:a,d(t){t&&d(e),i(x)}}}function Y(t,e,n){let{min:a=0}=e,{max:o=1e3}=e,{step:r=1}=e,{value:i=0}=e,{disabled:s=!1}=e;return t.$set=t=>{"min"in t&&n(5,a=t.min),"max"in t&&n(6,o=t.max),"step"in t&&n(7,r=t.step),"value"in t&&n(0,i=t.value),"disabled"in t&&n(1,s=t.disabled)},[i,s,function(t){n(0,i-r>=a?i-=r:i=a),t.target.blur()},function(t){n(0,i+r<=o?i+=r:i=o),t.target.blur()},function(t){n(0,i=parseInt(t.target.value)),isNaN(i)&&n(0,i=a),t.target.value=i,i<a?n(0,i=a):i>o&&n(0,i=o)},a,o,r]}var Z=class extends Q{constructor(t){super(),K(this,t,Y,X,l,{min:5,max:6,step:7,value:0,disabled:1})}};function tt(t){let e,n,o,r=t[0]?"ВКЛ":"ВЫКЛ";return{c(){e=f("button"),n=m(r),this.h()},l(t){e=g(t,"BUTTON",{class:!0,disabled:!0});var a=b(e);n=v(a,r),a.forEach(d),this.h()},h(){$(e,"class","switch"),e.disabled=t[1]},m(a,r){u(a,e,r),c(e,n),o=h(e,"click",t[2])},p(t,[a]){var o,i;1&a&&r!==(r=t[0]?"ВКЛ":"ВЫКЛ")&&(i=""+(i=r),(o=n).data!==i&&(o.data=i)),2&a&&(e.disabled=t[1])},i:a,o:a,d(t){t&&d(e),o()}}}function et(t,e,n){let{value:a=!1}=e,{disabled:o=!1}=e;return t.$set=t=>{"value"in t&&n(0,a=t.value),"disabled"in t&&n(1,o=t.disabled)},[a,o,function(t){n(0,a=!a),t.target.blur()}]}var nt=class extends Q{constructor(t){super(),K(this,t,et,tt,l,{value:0,disabled:1})}};function at(t){let e,n;return{c(){e=f("div"),n=f("div"),this.h()},l(t){e=g(t,"DIV",{class:!0});var a=b(e);n=g(a,"DIV",{class:!0}),b(n).forEach(d),a.forEach(d),this.h()},h(){$(n,"class","lamp"),w(n,"active",t[0]),$(e,"class","lamp-container")},m(t,a){u(t,e,a),c(e,n)},p(t,[e]){1&e&&w(n,"active",t[0])},i:a,o:a,d(t){t&&d(e)}}}function ot(t,e,n){let{value:a=!0}=e;return t.$set=t=>{"value"in t&&n(0,a=t.value)},[a]}var rt=class extends Q{constructor(t){super(),K(this,t,ot,at,l,{value:0})}};let it,st,lt,ct=!1,ut=!1,dt=!1;var ft={init:function(){it=new AudioContext,st=it.createOscillator(),st.type="sine",lt=it.createGain(),lt.gain.setValueAtTime(0,it.currentTime),st.connect(lt),lt.connect(it.destination)},setAntialising:function(t){dt=t},setFrequency:function(t){st&&st.frequency.setValueAtTime(t,it.currentTime)},start:function(){ct||(ut||(st.start(),ut=!0),dt?(lt.gain.setValueAtTime(0,it.currentTime+.01),lt.gain.linearRampToValueAtTime(1,it.currentTime+.04)):lt.gain.setValueAtTime(1,it.currentTime),ct=!0)},stop:function(){ct&&(dt?(lt.gain.setValueAtTime(1,it.currentTime+.01),lt.gain.linearRampToValueAtTime(0,it.currentTime+.04)):lt.gain.setValueAtTime(0,it.currentTime),ct=!1)}};let mt,pt;const ht={onReceptionStart:null,onReceptionEnd:null,transmitting:!1,subscribe(t){pt.then(()=>{mt&&(mt.close(),this.onReceptionEnd()),mt=new WebSocket(`ws://${location.host}/channels/${t}`),mt.onmessage=t=>{switch(t.data){case"0":"function"==typeof this.onReceptionEnd&&this.onReceptionEnd();break;case"1":"function"==typeof this.onReceptionGoing&&this.onReceptionGoing()}}})},startTransmission(){mt&&!this.transmitting&&(mt.send(1),this.transmitting=!0)},stopTransmission(){mt&&this.transmitting&&(mt.send(0),this.transmitting=!1)}};pt=new Promise((t,e)=>{ht.allowConnection=function(){t()}});var $t=ht;function bt(t){let e,n;return{c(){e=f("div"),n=m("Нажмите любую клавишу для инициализации"),this.h()},l(t){e=g(t,"DIV",{class:!0});var a=b(e);n=v(a,"Нажмите любую клавишу для инициализации"),a.forEach(d),this.h()},h(){$(e,"class","initialize-request")},m(t,a){u(t,e,a),c(e,n)},p:a,i:a,o:a,d(t){t&&d(e)}}}function gt(t){let e,n,a,o,r,i,s,l,h,w,T,x,E,_,S,V,k,A,N,D,R,C,j,q,P;function M(e){t[11].call(null,e)}let U={min:1,max:14,step:1,disabled:t[5]};void 0!==t[0]&&(U.value=t[0]);const G=new Z({props:U});function K(e){t[12].call(null,e)}I.push(()=>F(G,"value",M));let Q={min:100,max:1e3,step:40};void 0!==t[1]&&(Q.value=t[1]);const X=new Z({props:Q});function Y(e){t[13].call(null,e)}I.push(()=>F(X,"value",K));let tt={disabled:t[5]};void 0!==t[2]&&(tt.value=t[2]);const et=new nt({props:tt});I.push(()=>F(et,"value",Y));const at=new rt({props:{value:t[4]}}),ot=new rt({props:{value:t[5]}});return{c(){e=f("div"),n=f("div"),a=f("div"),o=m("Линия"),r=p(),H(G.$$.fragment),s=p(),l=f("div"),h=m("Частота звука"),w=p(),H(X.$$.fragment),x=p(),E=f("div"),_=m("Сглаживание"),S=p(),H(et.$$.fragment),k=p(),A=f("div"),N=m("Приём"),D=p(),H(at.$$.fragment),R=p(),C=f("div"),j=m("Передача"),q=p(),H(ot.$$.fragment),this.h()},l(t){e=g(t,"DIV",{class:!0});var i=b(e);n=g(i,"DIV",{class:!0});var c=b(n);a=g(c,"DIV",{class:!0});var u=b(a);o=v(u,"Линия"),u.forEach(d),r=y(c),z(G.$$.fragment,c),s=y(c),l=g(c,"DIV",{class:!0});var f=b(l);h=v(f,"Частота звука"),f.forEach(d),w=y(c),z(X.$$.fragment,c),x=y(c),E=g(c,"DIV",{class:!0});var m=b(E);_=v(m,"Сглаживание"),m.forEach(d),S=y(c),z(et.$$.fragment,c),k=y(c),A=g(c,"DIV",{class:!0});var p=b(A);N=v(p,"Приём"),p.forEach(d),D=y(c),z(at.$$.fragment,c),R=y(c),C=g(c,"DIV",{class:!0});var $=b(C);j=v($,"Передача"),$.forEach(d),q=y(c),z(ot.$$.fragment,c),c.forEach(d),i.forEach(d),this.h()},h(){$(a,"class","dashboard-label"),$(l,"class","dashboard-label"),$(E,"class","dashboard-label"),$(A,"class","dashboard-label"),$(C,"class","dashboard-label"),$(n,"class","dashboard"),$(e,"class","device")},m(t,i){u(t,e,i),c(e,n),c(n,a),c(a,o),c(n,r),W(G,n,null),c(n,s),c(n,l),c(l,h),c(n,w),W(X,n,null),c(n,x),c(n,E),c(E,_),c(n,S),W(et,n,null),c(n,k),c(n,A),c(A,N),c(n,D),W(at,n,null),c(n,R),c(n,C),c(C,j),c(n,q),W(ot,n,null),P=!0},p(t,e){const n={};32&e&&(n.disabled=t[5]),!i&&1&e&&(i=!0,n.value=t[0],O(()=>i=!1)),G.$set(n);const a={};!T&&2&e&&(T=!0,a.value=t[1],O(()=>T=!1)),X.$set(a);const o={};32&e&&(o.disabled=t[5]),!V&&4&e&&(V=!0,o.value=t[2],O(()=>V=!1)),et.$set(o);const r={};16&e&&(r.value=t[4]),at.$set(r);const s={};32&e&&(s.value=t[5]),ot.$set(s)},i(t){P||(B(G.$$.fragment,t),B(X.$$.fragment,t),B(et.$$.fragment,t),B(at.$$.fragment,t),B(ot.$$.fragment,t),P=!0)},o(t){L(G.$$.fragment,t),L(X.$$.fragment,t),L(et.$$.fragment,t),L(at.$$.fragment,t),L(ot.$$.fragment,t),P=!1},d(t){t&&d(e),J(G),J(X),J(et),J(at),J(ot)}}}function vt(t){let e,n,a,o,r;const s=[gt,bt],l=[];function c(t,e){return t[3]?0:1}return e=c(t),n=l[e]=s[e](t),{c(){n.c(),a=p()},l(t){n.l(t),a=y(t)},m(n,i){l[e].m(n,i),u(n,a,i),o=!0,r=[h(window,"keydown",t[6]),h(window,"keyup",t[7]),h(document.body,"mousedown",t[8]),h(document.body,"mouseup",t[9])]},p(t,[o]){let r=e;e=c(t),e===r?l[e].p(t,o):(M(),L(l[r],1,1,()=>{l[r]=null}),U(),n=l[e],n||(n=l[e]=s[e](t),n.c()),B(n,1),n.m(a.parentNode,a))},i(t){o||(B(n),o=!0)},o(t){L(n),o=!1},d(t){l[e].d(t),t&&d(a),i(r)}}}function yt(t,e,n){let a=parseInt(localStorage.getItem("channel"))||1,o=parseInt(localStorage.getItem("frequency"))||440,r="true"==localStorage.getItem("antialiasing")||!1,i=!1,s=!1,l=!1;function c(){ft.init(),$t.allowConnection(),$t.onReceptionGoing=()=>{n(4,s=!0)},$t.onReceptionEnd=()=>{n(4,s=!1)},n(3,i=!0)}function u(t){i?"INPUT"!=t.target.nodeName&&"BUTTON"!=t.target.nodeName&&($t.startTransmission(),n(5,l=!0)):116!=t.keyCode&&c()}function d(t){i&&($t.stopTransmission(),n(5,l=!1))}return t.$$.update=()=>{2&t.$$.dirty&&ft.setFrequency(o),4&t.$$.dirty&&ft.setAntialising(r),1&t.$$.dirty&&$t.subscribe(a),48&t.$$.dirty&&function(t,e){t||e?ft.start():ft.stop()}(s,l),1&t.$$.dirty&&localStorage.setItem("channel",a),2&t.$$.dirty&&localStorage.setItem("frequency",o),4&t.$$.dirty&&localStorage.setItem("antialiasing",r)},[a,o,r,i,s,l,u,d,function(t){0==t.button&&u(t)},function(t){0==t.button&&d()},c,function(t){a=t,n(0,a)},function(t){o=t,n(1,o)},function(t){r=t,n(2,r)}]}new class extends Q{constructor(t){super(),K(this,t,yt,vt,l,{})}}({target:document.body})}]);